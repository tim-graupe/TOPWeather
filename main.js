(()=>{"use strict";function t(t,e){const n=Math.round(10*t)/10;i.textContent=`${n}F`,m.textContent=e}function e(t,e){const n=Math.round(10*t)/10;i.textContent=`${n}C`,m.textContent=e}const n=document.getElementById("display-forecast");function a(t,e,a,o){const c=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),m=document.createElement("img");c.textContent=t,d.textContent=e,i.textContent=a,m.src=o,i.className="forecast-card",i.appendChild(c),i.appendChild(d),i.appendChild(m),n.appendChild(i)}const o=document.getElementById("display-forecast");function c(t){fetch(`http://api.openweathermap.org/data/2.5/forecast?q=${d.value},us&units=${t}&appid=f4c2e88d89f530a5c961cffa302dc0b9`,{mode:"cors"}).then((function(t){return t.json()})).then((function(e){fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e.city.coord.lat}&lon=${e.city.coord.lon}&units=${t}&exclude=hourly,minutely&appid=f4c2e88d89f530a5c961cffa302dc0b9`,{mode:"cors"}).then((function(t){return t.json()})).then((function(e){let n=[],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let t=0;t<e.daily.length-1;t++)n.push(e.daily[t]);const c=n.map((e=>"imperial"==t?Math.round(10*e.temp.max)/10+"F":Math.round(10*e.temp.max)/10+"C")),i=n.map((e=>"imperial"==t?Math.round(10*e.temp.min)/10+"F":Math.round(10*e.temp.min)/10+"C")),d=n.map((t=>{let e=new Date(1e3*t.dt);return o[e.getDay()]})),m=n.map((t=>`http://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`));for(let t=0;t<c.length;t++)a(c[t],i[t],d[t],m[t])}))}))}const i=document.getElementById("display-temp"),d=(document.getElementById("submit-btn"),document.getElementById("city-input")),m=document.getElementById("display-city-name"),p=document.getElementById("display-hourly");async function r(n){const a=d.value;isNaN(a)?(o.textContent="",p.textContent="",async function(n){const a=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${d.value}&units=${n}&appid=f4c2e88d89f530a5c961cffa302dc0b9`,{mode:"cors"}).catch((function(t){console.log(t)})),o=await a.json();"imperial"==n?t(o.main.temp,o.name):e(o.main.temp,o.name)}(n)):isNaN(a)||(o.textContent="",p.textContent="",async function(n){const a=await fetch(`http://api.openweathermap.org/data/2.5/weather?zip=${d.value},us&units=${n}&appid=f4c2e88d89f530a5c961cffa302dc0b9`,{mode:"cors"}).catch((function(t){console.log(t)})),o=await a.json();"imperial"==n?t(o.main.temp,o.name):e(o.main.temp,o.name)}(n))}const l=document.getElementById("display-hourly");function u(t,e,n){const a=document.createElement("div"),o=document.createElement("div"),c=document.createElement("img");a.textContent=t,o.textContent=e,c.src=n,a.appendChild(o),l.appendChild(a),a.appendChild(c),l.className="hourly-card"}function s(t){fetch(`http://api.openweathermap.org/data/2.5/forecast?q=${d.value},us&units=${t}&appid=f4c2e88d89f530a5c961cffa302dc0b9`,{mode:"cors"}).then((function(t){return t.json()})).then((function(e){fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e.city.coord.lat}&lon=${e.city.coord.lon}&units=${t}&exclude=daily,minutely&appid=f4c2e88d89f530a5c961cffa302dc0b9`,{mode:"cors"}).then((function(t){return t.json()})).then((function(e){let n=[];for(let t=0;t<e.hourly.length-36;t++)n.push(e.hourly[t]);const a=n.map((e=>"imperial"==t?Math.round(10*e.temp)/10+"F":Math.round(10*e.temp)/10+"C")),o=n.map((t=>{let e=new Date(1e3*t.dt),n=e.getHours(),a=e.getMinutes();return`${n}:${a}${a}`})),c=n.map((t=>`http://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`));for(let t=0;t<a.length;t++)u(o[t],a[t],c[t])}))}))}document.getElementById("display-hourly");const h=document.getElementById("submit-btn"),f=document.getElementById("city-input"),y=document.getElementById("change-to-C"),g=document.getElementById("change-to-F");y.addEventListener("click",(()=>{r("metric"),c("metric"),s("metric")})),g.addEventListener("click",(()=>{r("imperial"),c("imperial"),s("imperial")})),h.addEventListener("click",(()=>{r("imperial"),c("imperial"),s("imperial")})),f.addEventListener("keypress",(t=>{"Enter"===t.key&&(r("imperial"),c("imperial"),s("imperial"))}))})();